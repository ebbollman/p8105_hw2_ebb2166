Homework 2
================
E. Brennan Bollman

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

##### Step 1: Read the Mr. Trashwheel dataset, with clean names, omitting non-data entries and values that are not dumpster-specific.

``` r
trashwheel_df = 
  read_xlsx(
    "./data/Trash-wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

##### Step 2: Read the precipitation data for 2017 and 2018.

``` r
precip_2018 = 
  read_excel(
    "./data/Trash-wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/Trash-wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

##### Step 3: Combine annual precipitation. Convert month from dbl to character variable.

``` r
precip_df = 
  bind_rows(precip_2018, precip_2017)

month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

left_join(precip_df, month_df, by = "month") %>% 
  select(-month)
```

    ## # A tibble: 24 x 3
    ##     year total month_name
    ##    <dbl> <dbl> <chr>     
    ##  1  2018  0.94 January   
    ##  2  2018  4.8  February  
    ##  3  2018  2.69 March     
    ##  4  2018  4.69 April     
    ##  5  2018  9.27 May       
    ##  6  2018  4.77 June      
    ##  7  2018 10.2  July      
    ##  8  2018  6.45 August    
    ##  9  2018 10.5  September 
    ## 10  2018  2.12 October   
    ## # … with 14 more rows

##### Step 4: Describe datasets.

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and amount trash collected,
including specific kinds of trash. There are a total of 344 observations
on this data for the dumpster. Additional data include monthly
precipitation data for the years 2017 to 2018 and include observations
on 24. The median number of sports balls found in a dumpster in 2017 was
8. The total precipitation in 2018 was 70.33 inches.

## Problem 2

##### Step 1: Read the NYC Transit data and clean, describe.

``` r
nyctransit_df = 
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE")) %>% 
  mutate(entry = as.logical(entry))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

This dataset describes NYC subway station locations, the lines and
routes running through those stations, and various parameters such as if
the station offers ticket vending, the type of entrance to the station,
and whether the is ADA compliant. Data were first imported, pertinent
variables selected, and some variable types transformed. Data are
presented on 1868 observations for 19 variables. These data are not yet
tidy, however, in part because the number of routes passing each station
and names of those routes are presented across 11 variable columns.

##### Step 2: Analyze data.

There are 465 distinct stations in this dataset.

This code will further analyze these stations.

``` r
nyctransit_df %>% 
  filter(ada == "TRUE") %>% 
  distinct(line, station_name) %>% 
  count()
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    84

``` r
nyctransit_df %>% 
  filter(vending == "NO", entry == "TRUE") %>%
  distinct(line, station_name) %>% 
  count()
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    43

There are 84 distinct stations that are ADA compliant. Of stations that
do not have vending services, 43 allow entry.
